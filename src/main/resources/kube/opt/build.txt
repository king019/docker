mac

docker run --name docker -h docker -d --restart=always --privileged -v /var/run/docker.sock:/var/run/docker.sock -e TZ='Asia/Shanghai' --security-opt seccomp:unconfined  registry.cn-beijing.aliyuncs.com/king019/docker:build


docker run --name docker -h docker -d --restart=always --privileged -v /var/run/docker.sock:/var/run/docker.sock -e TZ='Asia/Shanghai' --security-opt seccomp:unconfined  king019/docker:build


docker run --name docker -h docker -d --restart=always --privileged -v /var/run/docker.sock:/var/run/docker.sock -e TZ='Asia/Shanghai' --security-opt seccomp:unconfined  docker:5000/king019/docker:build


alias kubectl="minikube kubectl --"


1,安装minikube
https://minikube.sigs.k8s.io/docs/start/

source /etc/profile
mkdir /opt/soft
cd /opt/soft
linux   amd
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
(sudo) install minikube-linux-amd64 /usr/local/bin/minikube
linux   arm
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-arm64
(sudo) install minikube-linux-arm64 /usr/local/bin/minikube



max
curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64
install minikube-darwin-amd64 /usr/local/bin/minikube

问题处理
ubuntu使用
sudo sysctl fs.protected_regular=0

source /etc/profile




rm -fr /tmp/*
rm -fr /root/.minikube/*

2,启动



source /etc/profile

外部绑定ip
minikube ip


1.25
可运行
linux


minikube start --force --insecure-registry=docker:5000 --driver=docker --kubernetes-version=v1.23.8 --cpus=4 --memory=15096mb --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'




smp
minikube delete

minikube start --force  --insecure-registry=docker:5000 --driver=docker --kubernetes-version=v1.23.8 --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'


4096
minikube start --force --insecure-registry=docker:5000,docker:5001 --driver=docker --kubernetes-version=v1.23.8  --memory=4096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,http://docker:5001,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'
3c-4g

minikube start --force --insecure-registry=docker:5000,docker:5001 --driver=docker --kubernetes-version=v1.23.8 --cpus=3 --memory=4096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,http://docker:5001,https://msb3wa7d.mirror.aliyuncs.com --base-image="registry.cn-qingdao.aliyuncs.com/king019/kicbase_stable:v0.0.39"


minikube start --force --insecure-registry=docker:5000,docker:5001 --driver=docker --kubernetes-version=v1.23.8 --cpus=3 --memory=4096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,http://docker:5001,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'
3c-5g
minikube start --force --insecure-registry=docker:5000,docker:5001 --driver=docker --kubernetes-version=v1.23.8 --cpus=3 --memory=5096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,http://docker:5001,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'

3c-7g
minikube start --force --insecure-registry=docker:5000 --driver=docker --kubernetes-version=v1.23.8  --cpus=3 --memory=7096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'

3c-8g
minikube start --force --insecure-registry=docker:5000,docker:5001 --driver=docker --kubernetes-version=v1.23.8 --cpus=3 --memory=8096mb --extra-config=apiserver.service-node-port-range=1-65535 --image-mirror-country='cn' --registry-mirror=http://docker:5000,http://docker:5001,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'



minikube delete
minikube start --force --insecure-registry=docker:5000 --driver=docker --cpus=2 --memory=4096mb --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.25.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'



1.9
minikube delete
minikube start --force --insecure-registry=docker:5000 --driver=docker --cpus=3 --memory=3096mb --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.9.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'
1.8
minikube delete
minikube start --force --insecure-registry=docker:5000 --driver=docker --cpus=3 --memory=3096mb --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.8.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'

1.5
minikube delete
minikube start --force --insecure-registry=docker:5000 --driver=docker --cpus=3 --memory=3096mb --image-mirror-country='cn' --registry-mirror=http://docker:5000,https://msb3wa7d.mirror.aliyuncs.com --iso-url=https://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/iso/minikube-v1.5.0.iso --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'





docker
{
  "features": {
    "buildkit": true
  },
  "insecure-registries": [
    "docker:5000"
  ],
  "experimental": true,

  "registry-mirrors": [
    "http://docker:5000",
    "https://docker:5000",
    "https://msb3wa7d.mirror.aliyuncs.com"
  ]
}



kuboard
https://kuboard.cn/install/v3/install-in-k8s.html
安装
kubectl apply -f https://addons.kuboard.cn/kuboard/kuboard-v3.yaml

kubectl apply -f https://addons.kuboard.cn/kuboard/kuboard-v3-swr.yaml
卸载
kubectl delete -f https://addons.kuboard.cn/kuboard/kuboard-v3.yaml
http://your-node-ip-address:30080


http://k8s:30080
用户名： admin
密码： Kuboard123



dashboard
kubectl get svc --all-namespaces
kubernetes-dashboard   kubernetes-dashboard       443:32443/TCP                4m50s
https://k8s:32443


获取登录token
kubectl -n kube-system describe secret $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')




sudo ktctl connect